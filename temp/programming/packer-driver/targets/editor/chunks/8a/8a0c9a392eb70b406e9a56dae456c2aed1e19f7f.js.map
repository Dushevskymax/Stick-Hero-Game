{"version":3,"sources":["file:///C:/Users/user/StickHero/assets/scripts/AnimationHelper.ts"],"names":["AnimationHelper","tween","Vec3","animateNodes","parent","movements","callback","validMovements","filter","node","isValid","length","tweens","map","x","to","position","y","parallel","call","start","animateNodePosition","duration","action","animateStickDrop","stick","angle","animatePlayerFall","player"],"mappings":";;;+EAEaA,e;;;;;;;;;AAFEC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;;;;;;;;iCAETF,e,GAAN,MAAMA,eAAN,CAAsB;AACN,eAAZG,YAAY,CAACC,MAAD,EAAeC,SAAf,EAAuDC,QAAvD,EAA8E;AAC7F,gBAAMC,cAAc,GAAGF,SAAS,CAACG,MAAV,CAAiB,CAAC;AAAEC,YAAAA;AAAF,WAAD,KAAcA,IAAI,IAAIA,IAAI,CAACC,OAA5C,CAAvB;;AACA,cAAIH,cAAc,CAACI,MAAf,KAA0B,CAA9B,EAAiC;AAC7BL,YAAAA,QAAQ,QAAR,IAAAA,QAAQ;AACR;AACH;;AACD,gBAAMM,MAAM,GAAGL,cAAc,CAACM,GAAf,CAAmB,CAAC;AAAEJ,YAAAA,IAAF;AAAQK,YAAAA;AAAR,WAAD,KAC9Bb,KAAK,CAACQ,IAAD,CAAL,CAAYM,EAAZ,CAAe,GAAf,EAAoB;AAAEC,YAAAA,QAAQ,EAAE,IAAId,IAAJ,CAASY,CAAT,EAAYL,IAAI,CAACO,QAAL,CAAcC,CAA1B,EAA6B,CAA7B;AAAZ,WAApB,CADW,CAAf;AAGAhB,UAAAA,KAAK,CAACG,MAAD,CAAL,CAAcc,QAAd,CAAuB,GAAGN,MAA1B,EAAkCO,IAAlC,CAAuCb,QAAvC,WAAuCA,QAAvC,GAAoD,MAAM,CAAE,CAA5D,EAA+Dc,KAA/D;AACH;;AAEyB,eAAnBC,mBAAmB,CAACZ,IAAD,EAAaK,CAAb,EAAwBG,CAAxB,EAAmCK,QAAnC,EAAqDhB,QAArD,EAA4E;AAClG,cAAI,CAACG,IAAD,IAAS,CAACA,IAAI,CAACC,OAAnB,EAA4B;AACxBJ,YAAAA,QAAQ,QAAR,IAAAA,QAAQ;AACR;AACH;;AACD,gBAAMiB,MAAM,GAAGtB,KAAK,CAACQ,IAAD,CAAL,CAAYM,EAAZ,CAAeO,QAAf,EAAyB;AAAEN,YAAAA,QAAQ,EAAE,IAAId,IAAJ,CAASY,CAAT,EAAYG,CAAZ,EAAe,CAAf;AAAZ,WAAzB,CAAf;;AACA,cAAIX,QAAJ,EAAc;AACViB,YAAAA,MAAM,CAACJ,IAAP,CAAYb,QAAZ;AACH;;AACDiB,UAAAA,MAAM,CAACH,KAAP;AACH;;AAEsB,eAAhBI,gBAAgB,CAACC,KAAD,EAAcnB,QAAd,EAA+C;AAClE,cAAI,CAACmB,KAAD,IAAU,CAACA,KAAK,CAACf,OAArB,EAA8B;AAC1BJ,YAAAA,QAAQ,CAACmB,KAAD,CAAR;AACA;AACH;;AACDxB,UAAAA,KAAK,CAACwB,KAAD,CAAL,CAAaV,EAAb,CAAgB,IAAhB,EAAsB;AAAEW,YAAAA,KAAK,EAAE,CAAC;AAAV,WAAtB,EAAsCP,IAAtC,CAA2C,MAAMb,QAAQ,CAACmB,KAAD,CAAzD,EAAkEL,KAAlE;AACH;;AAEuB,eAAjBO,iBAAiB,CAACC,MAAD,EAAetB,QAAf,EAAqC;AACzD,cAAI,CAACsB,MAAD,IAAW,CAACA,MAAM,CAAClB,OAAvB,EAAgC;AAC5BJ,YAAAA,QAAQ;AACR;AACH;;AACDL,UAAAA,KAAK,CAAC2B,MAAD,CAAL,CACKb,EADL,CACQ,GADR,EACa;AAAEC,YAAAA,QAAQ,EAAE,IAAId,IAAJ,CAAS0B,MAAM,CAACZ,QAAP,CAAgBF,CAAzB,EAA4Bc,MAAM,CAACZ,QAAP,CAAgBC,CAAhB,GAAoB,GAAhD,EAAqD,CAArD;AAAZ,WADb,EAEKE,IAFL,CAEUb,QAFV,EAGKc,KAHL;AAIH;;AA1CwB,O","sourcesContent":["import { Node, tween, Vec3 } from 'cc';\n\nexport class AnimationHelper {\n    static animateNodes(parent: Node, movements: { node: Node; x: number }[], callback?: () => void) {\n        const validMovements = movements.filter(({ node }) => node && node.isValid);\n        if (validMovements.length === 0) {\n            callback?.();\n            return;\n        }\n        const tweens = validMovements.map(({ node, x }) =>\n            tween(node).to(0.3, { position: new Vec3(x, node.position.y, 0) })\n        );\n        tween(parent).parallel(...tweens).call(callback ?? (() => {})).start();\n    }\n\n    static animateNodePosition(node: Node, x: number, y: number, duration: number, callback?: () => void) {\n        if (!node || !node.isValid) {\n            callback?.();\n            return;\n        }\n        const action = tween(node).to(duration, { position: new Vec3(x, y, 0) });\n        if (callback) {\n            action.call(callback);\n        }\n        action.start();\n    }\n\n    static animateStickDrop(stick: Node, callback: (stick: Node) => void) {\n        if (!stick || !stick.isValid) {\n            callback(stick);\n            return;\n        }\n        tween(stick).to(0.25, { angle: -90 }).call(() => callback(stick)).start();\n    }\n\n    static animatePlayerFall(player: Node, callback: () => void) {\n        if (!player || !player.isValid) {\n            callback();\n            return;\n        }\n        tween(player)\n            .to(0.5, { position: new Vec3(player.position.x, player.position.y - 500, 0) })\n            .call(callback)\n            .start();\n    }\n}"]}